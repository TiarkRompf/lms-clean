% ----- listings

\definecolor{ckeyword}{HTML}{7F0055}
\definecolor{ccomment}{HTML}{3F7F5F}
\definecolor{cstring}{HTML}{2A0099}

\definecolor{aliceblue}{rgb}{0.86, 0.90, 0.95}

\newcommand{\cbox}[1]{\colorbox{aliceblue}{#1}}

\lstdefinelanguage{Scala}%
{morekeywords={abstract,%
  case,catch,char,class,%
  def,else,extends,final,finally,for,%
  if,import,implicit,%
  match,module,lazy,%
  new,null,undefined,%
  override,%
  package,private,protected,public,%
  for,public,return,super,%
  this,throw,trait,try,type,%
  val,var,%
  with,while,%
  let,skip,assert,then,fst,snd,root,idx,sum,prod,exists,forall,%
  yield%
  },%
  sensitive,%
  %moredelim=*[il][\bfseries]{\#\#\ },
  %moredelim={[is][\fbox]{^}{^}},
  escapechar=^,
  morecomment=[l]//,%
  morecomment=[s]{/*}{*/},%
  morestring=[b]",%
%  morestring=[b]',%
  showstringspaces=false%
}[keywords,comments,strings]%

\lstset{language=Scala,%
  mathescape=true,%
%  columns=[c]fixed,%
%  basewidth={0.5em, 0.40em},%
%  aboveskip=5pt,%\smallskipamount,
%  belowskip=5pt,%\negsmallskipamount,
  aboveskip=2pt,%\smallskipamount,
  belowskip=1pt,%\negsmallskipamount,
  lineskip=-3pt,
  % lineskip=-0.2pt,
  basewidth={0.59em, 0.4em},%
%  backgroundcolor=\color{listingbg},
  basicstyle=\small\ttfamily,
  keywordstyle=\keywordstyle,
  commentstyle=\commentstyle,
  stringstyle=\stringstyle,
%  xleftmargin=0.5cm
  literate={κ}{{$\kappa$}}1
           {∈}{{$\in$}}3
           {α}{{$\alpha$}}1
           {×}{{$\times$}}1
           {₁}{{$_1$}}1
           {₂}{{$_2$}}1
           {₃}{{$_3$}}1
           {ℕ}{{$\mathbb{N}$}}1
           {𝔹}{{$\mathbb{B}$}}1
           {|->}{{$\mapsto$}}3
           {⁺}{{$^+$}}1
           %{-->}{{$\to$}}3
           %{=>}{{$\Rightarrow$}}2
           %{|-}{{$\ts$}}2
           %{fun}{{$\lambda$}}1
           %{idx}{{$\#$}}1
           %{sum}{{$\Sigma$}}1
           %{array(}{{$\langle.\rangle$(}}3
           %{[[}{{$[\![$}}1
           %{]]}{{$]\!]$}}1
           %{…}{{$\!...$}}1
}

\definecolor{listingbg}{RGB}{240, 240, 240}

\newcommand{\commentstyle}[1]{\color{ccomment}\itshape{#1}}
\newcommand{\keywordstyle}[1]{\color{ckeyword}\bfseries{#1}}
\newcommand{\stringstyle}[1]{\color{cstring}\bfseries{#1}}

\lstnewenvironment{listing}{\lstset{language=Scala}}{}
\lstnewenvironment{listingtiny}{\lstset{language=Scala,basicstyle=\scriptsize\ttfamily}}{}

%\newcommand{\code}[1]{\lstinline[language=Scala,columns=fixed,basicstyle=\ttfamily]|#1|}


\newcommand{\IMP}[0]{\texttt{IMP}}
\newcommand{\FUN}[0]{\texttt{FUN}}

\newcommand{\TOOL}[0]{\texttt{SIGMA}}



% ----- packed items, so we don't waste space
\newenvironment{sitemize}{
\begin{itemize}
  \setlength{\itemsep}{1pt}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}
}{\end{itemize}}

\newenvironment{senumerate}{
\begin{enumerate}
  \setlength{\itemsep}{1pt}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}
}{\end{enumerate}}

\newcommand{\mypar}[1]{{\bf #1.}}

% ----- formal

%\newcommand{\judgement}[2]{{\bf #1} \hfill #2}
%\newcommand{\den}[1]{$\left\llbracket$\;#1\;$\right\rrbracket$}
\newcommand{\den}[1]{\llbracket~#1~\rrbracket}

%\newcommand{\ts}{\,\vdash\,}
\newcommand{\evalsto}{\Downarrow}

\newcommand{\mbind}{\;{\small{\texttt{>>}\hspace{-0.3pt}\raisebox{-0.15pt}{\texttt{=}}}}\;}

%\newcommand{\mbind}{{\small{\texttt{>>}\hspace{-1.7pt}\raisebox{-0.15pt}{\texttt{=}}}}}

\newcommand{\rref}[1]{\textsc{(#1)}}

\newcommand{\RR}{\mathbb{R}}

%\renewcommand{\d}[1]{{d/d #1}\ }
%\renewcommand{\d}[1]{{\tiny{\frac{d}{d #1}}}\ }
\renewcommand{\d}[1]{\sfrac{d\!}{d #1}\ }
\newcommand{\dx}{\d{x}}
\newcommand{\dy}{\d{y}}

\newcommand{\norm}[1]{\left\Vert #1 \right\Vert}


% ----- comments and todo

%\newcommand{\note}[1]{{\color{red}[#1]}}
\newcommand{\todo}[1]{\note{TODO: #1}}

\newcommand{\silent}[1]{}

\newcommand{\at}{@}

